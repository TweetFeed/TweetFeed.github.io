<!DOCTYPE html>
<html>
<body>

<h2>Access a JavaScript Object</h2>
<p id="demo"></p>

<script>
(async () => {
        const response = await fetch('https://api.github.com/repos/TweetFeed/TweetFeed.github.io/contents/misp/');
        const data = await response.json();

        let htmlString = '<head><title>Index of /misp</title></head><body><h1>Index of /misp</h1><ul>';
        
        for (let file of data) {
          if (file.name != "index.html" &&  file.name != "manifest.json"){
            
            const response_row = await fetch('https://tweetfeed.live/' + file.path);
            const data_row = await response_row.json();
            console.log(data_row.Event.date)
            
            htmlString += `<li><a href="${file.path}">${file.name}</a> | ${data_row.Event.date} | ${nFormatter(file.size,2)} </li>`;
          }
        }

        htmlString += '</ul></body>';
        document.getElementsByTagName('body')[0].innerHTML = htmlString;
      })()
</script>
<script>
  function nFormatter(num, digits) {
    const lookup = [
      { value: 1, symbol: "" },
      { value: 1e3, symbol: "k" },
      { value: 1e6, symbol: "M" },
      { value: 1e9, symbol: "G" },
      { value: 1e12, symbol: "T" },
      { value: 1e15, symbol: "P" },
      { value: 1e18, symbol: "E" }
    ];
    const rx = /\.0+$|(\.[0-9]*[1-9])0+$/;
    var item = lookup.slice().reverse().find(function(item) {
      return num >= item.value;
    });
    return item ? (num / item.value).toFixed(digits).replace(rx, "$1") + item.symbol : "0";
  }
  </script>
  <script>
    $(function() {
      $('[data-toggle="tooltip"]').tooltip()
    })
  </script>

</body>
</html>
